<!DOCTYPE html>
<head>
    
    <title>Home</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    {% include 'header.html' %}
    <main id="app">
        <div id="content">Welcome â€” select a section from the navigation.</div>
    </main>

    <script>
    // Simple client-side router that fetches rendered template fragments
    async function loadPath(path, push=true) {
        try {
            const res = await fetch('/module' + path);
            if (!res.ok) {
                document.getElementById('content').innerHTML = '<p>Module not found.</p>';
                return;
            }
            const html = await res.text();
            document.getElementById('content').innerHTML = html;
            if (push) history.pushState({path}, '', path);
        } catch (e) {
            document.getElementById('content').innerHTML = '<p>Error loading module.</p>';
        }
    }

    // Intercept nav clicks
    document.addEventListener('click', function(e) {
        const a = e.target.closest('a');
        if (!a) return;
        const href = a.getAttribute('href');
        if (!href) return;
        // Only intercept internal links (start with '/')
        if (href.startsWith('/')) {
            e.preventDefault();
            loadPath(href);
        }
    });

    // Handle back/forward
    window.addEventListener('popstate', function(e) {
        const path = location.pathname || '/';
        loadPath(path, false);
    });

    // On first load, load current path if not '/'
    (function(){
        const path = location.pathname || '/';
        if (path !== '/') loadPath(path, false);
    })();
    </script>
</body>